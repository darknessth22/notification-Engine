==========================================
FILES NEEDED FOR NEW MACHINE DEPLOYMENT
==========================================

ğŸ“‹ ESSENTIAL FILES TO COPY:

1. DOCKER CONFIGURATION FILES:
   âœ… docker-compose.yml          - Main orchestration file
   âœ… Dockerfile                  - Container build instructions
   âœ… supervisord.conf            - Process manager (runs Node.js + Python)
   âœ… entrypoint.sh               - Container startup script
   âœ… requirements.txt            - Python dependencies

2. APPLICATION SOURCE CODE (BOTH REQUIRED):
   âœ… apps/whatsapp_gateway/whatsapp-server.js    - Node.js Baileys server (WhatsApp connection)
   âœ… apps/whatsapp_gateway/python_api.py         - Python FastAPI gateway (API endpoints)
   âœ… apps/whatsapp_gateway/package.json          - Node.js dependencies
   
   âš ï¸  BOTH services are required and run simultaneously via supervisord

3. CONFIGURATION:
   âœ… config/config.yaml          - Application settings (phone numbers, etc.)

4. OPTIONAL FILES:
   âœ… docker-compose.registry.yml - For pre-built image deployment
   âœ… .dockerignore               - Docker build optimization
   âœ… .gitignore                  - Git ignore rules

==========================================
DIRECTORY STRUCTURE TO CREATE:
==========================================

new-machine/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ supervisord.conf
â”œâ”€â”€ entrypoint.sh
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ whatsapp_gateway/
â”‚       â”œâ”€â”€ whatsapp-server.js
â”‚       â”œâ”€â”€ python_api.py
â”‚       â””â”€â”€ package.json
â””â”€â”€ config/
    â””â”€â”€ config.yaml

==========================================
WHAT YOU DON'T NEED TO COPY:
==========================================

âŒ apps/ai_detection/          - AI detection stays on individual machines
âŒ data/                       - Videos/images not needed for WhatsApp service
âŒ logs/                       - Created automatically
âŒ docs/                       - Documentation only
âŒ .git/                       - Git history
âŒ __pycache__/                - Python cache files

==========================================
DEPLOYMENT STEPS ON NEW MACHINE:
==========================================

1. Install Docker and Docker Compose
2. Copy the files listed above
3. Navigate to the project directory
4. Run: docker compose up -d
5. Scan QR code for WhatsApp authentication (first time only)
6. Test: curl http://localhost:3051/health

==========================================
REGISTRY-BASED DEPLOYMENT (ALTERNATIVE):
==========================================

If you build and push to Docker registry:
1. Build: docker build -t your-registry/whatsapp-gateway:latest .
2. Push: docker push your-registry/whatsapp-gateway:latest

Then on new machine you only need:
âœ… docker-compose.registry.yml (rename to docker-compose.yml)
âœ… config/config.yaml
âœ… Create logs/ directory

==========================================
WHY BOTH SERVICES ARE NEEDED:
==========================================

ğŸŸ¦ Node.js Baileys Server (Port 3050):
   - Handles WhatsApp Web connection
   - Manages QR code authentication  
   - Sends/receives WhatsApp messages
   - WebSocket communication with WhatsApp

ğŸŸ¨ Python FastAPI (Port 3051):
   - Provides REST API endpoints
   - Handles multi-number logic from config.yaml
   - Receives requests from external services
   - Bridges to Node.js Baileys server

ğŸ”„ How they work together:
   External App â†’ Python API (3051) â†’ Node.js Server (3050) â†’ WhatsApp

==========================================
PORTS USED:
==========================================

ğŸ”Œ 3050 - Node.js Baileys WebSocket server
ğŸ”Œ 3051 - Python FastAPI gateway
ğŸ”Œ Health check: http://localhost:3051/health

==========================================
